{%extends 'base.html'%}
{% load static %} {% load bootstrap4 %}

{% load month_labels %}
{% block content %}
<div class="container" style="margin-top:80px;">

    <div class="expense-analytics">


        {% if context_type == 'annually' or context_type == 'monthly' or context_type == 'daily' %}
            <div class="row">


                <div class="col md-8">
                    {% if datasets %}
                        <canvas id="myChart" height="120"></canvas>
                        {% load django_tables2 %}
                        {%if expense_table_in_month_view%}
                            {% render_table expense_table_in_month_view%}
                        {%endif%}
                        {%if expense_table_in_daily_view %}
                            {% render_table expense_table_in_daily_view%}
                        {%endif%}
                        <script>
                            var ctx = document.getElementById("myChart").getContext('2d');
                            var isShowScales = {% if report_type != 'pie' %}true{% else %}false {% endif %};
                            var xAxisLabel = '{{x_axis_label}}';
                            var dataset;
                            var myChart = new Chart(ctx, {
                                type: '{{report_type}}',
                                data: {
                                    labels: {{ labels | safe }},
                                    datasets: {{ datasets | safe}}
                                },
                                options: {
                                    responsive: true,
                                    title: {
                                        display: true,
                                        text: '{{ title }}'
                                    },
                                    tooltips: {
                                        mode: 'index',
                                        intersect: false,
                                    },
                                    hover: {
                                        mode: 'nearest',
                                        intersect: true
                                    }
                                    ,
                                    scales: {
                                        xAxes: [{
                                            display: isShowScales,
                                            scaleLabel: {
                                                display: isShowScales,
                                                labelString: xAxisLabel
                                            }
                                        }],
                                        yAxes: [{
                                            display: isShowScales,
                                            scaleLabel: {
                                                display: isShowScales,
                                                labelString: 'Amount'
                                            }
                                        }]
                                    }
                                }
                            });
                        </script>
                    {% else %}
                        No data
                    {% endif %}
                </div>
            </div>
            {% endif %}
    </div>
  </div>

{% endblock %}
